
<!DOCTYPE html>
<html lang="zh-Hant">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="https://cdn.tailwindcss.com"></script>
    <title>智慧餐點推薦系統</title>
    <style>
      body {
        font-family: 'Georgia', 'Noto Serif TC', serif;
      }
      .section { display: none; }
      .active { display: block; }
    </style>
  </head>
  <body class="bg-[#f8f5f0] text-[#2c2c2c]">

    <section class="text-center py-16 bg-cover bg-center" style="background-image: url('https://images.unsplash.com/photo-1600891964599-f61ba0e24092?auto=format&fit=crop&w=1600&q=80');">
      <div class="bg-black bg-opacity-50 p-6 rounded-xl inline-block">
        <h1 class="text-4xl md:text-5xl font-bold text-white mb-3">智慧餐點推薦系統</h1>
        <p class="text-lg text-gray-200">依據喜好推薦餐點</p>
      </div>
    </section>

    <main class="max-w-2xl mx-auto px-6 py-10 space-y-10">

      <!-- 登入主頁 -->
      <div id="enter" class="section active text-center space-y-4">
        <button onclick="showSection('login')" class="bg-[#4b3b2a] text-white px-6 py-3 rounded-full hover:bg-[#2f261c] transition">登入系統</button>
      </div>

      <!-- 登入與註冊選擇 -->
      <div id="login" class="section text-center space-y-4">
        <p class="text-lg">已有帳號？</p>
        <div class="flex justify-center gap-4">
          <button onclick="showSection('inputLogin')" class="border border-gray-500 px-5 py-2 rounded-full hover:bg-gray-100">是</button>
          <button onclick="showSection('registerPrompt')" class="border border-gray-500 px-5 py-2 rounded-full hover:bg-gray-100">否</button>
        </div>
      </div>

      <!-- 登入介面 -->
      <div id="inputLogin" class="section space-y-4">
        <input type="email" id="loginAccount" placeholder="帳號（Email）" class="w-full p-3 border border-gray-300 rounded-lg">
        <input type="password" id="loginPassword" placeholder="密碼" class="w-full p-3 border border-gray-300 rounded-lg">
        <p class="text-sm text-red-500" id="loginError"></p>
        <button onclick="login()" class="w-full bg-[#4b3b2a] text-white py-3 rounded-full hover:bg-[#2f261c] transition">登入</button>
      </div>

      <!-- 註冊流程 -->
      <div id="registerPrompt" class="section text-center space-y-3">
        <p>尚未註冊，請建立帳戶</p>
        <button onclick="showSection('requireFormat')" class="bg-[#4b3b2a] text-white px-6 py-2 rounded-full hover:bg-[#2f261c]">建立帳戶</button>
      </div>

      <div id="requireFormat" class="section space-y-3">
        <input type="email" id="registerAccount" placeholder="帳號（Email）" class="w-full p-3 border border-gray-300 rounded-lg">
        <input type="password" id="registerPassword" placeholder="密碼（至少 6 碼）" class="w-full p-3 border border-gray-300 rounded-lg">
        <p class="text-sm text-red-500" id="registerError"></p>
        <button onclick="register()" class="w-full bg-[#4b3b2a] text-white py-3 rounded-full hover:bg-[#2f261c] transition">送出</button>
      </div>

      <div id="registerSuccess" class="section text-center space-y-3">
        <p class="text-green-700 text-lg">註冊成功！</p>
        <button onclick="showSection('inputLogin')" class="bg-[#4b3b2a] text-white px-6 py-2 rounded-full hover:bg-[#2f261c]">立即登入</button>
      </div>

      <div id="loginSuccess" class="section text-center space-y-4">
        <p>登入成功，歡迎回來！</p>
        <button onclick="showSection('oneMeal')" class="w-full border border-gray-500 px-6 py-3 rounded-full hover:bg-gray-100">選擇一餐</button>
        <button onclick="showSection('allDay')" class="w-full border border-gray-500 px-6 py-3 rounded-full hover:bg-gray-100">一整天安排</button>
      </div>

          <div id="loginSuccess" class="section text-center space-y-4">
      <p>登入成功，歡迎回來！</p>
      <button onclick="showSection('oneMeal')" class="btn-outline w-full">選擇一餐</button>
      <button onclick="showSection('allDay')" class="btn-outline w-full">一整天安排</button>
    </div>

    <!-- 你剛剛的推薦流程：分類 → 條件設定 → 推薦結果 -->
    <div id="oneMeal" class="section">
      <button onclick="showSection('categorySelect')" class="btn-primary w-full">選擇分類</button>
    </div>

    <div id="allDay" class="section space-y-3">
      <p class="text-center">今天想吃幾餐？</p>
      <div class="grid grid-cols-2 gap-2">
        <button onclick="showSection('categorySelect')" class="btn-outline">1 餐</button>
        <button onclick="showSection('categorySelect')" class="btn-outline">2 餐</button>
        <button onclick="showSection('categorySelect')" class="btn-outline">3 餐</button>
        <button onclick="showSection('categorySelect')" class="btn-outline">4 餐</button>
      </div>
    </div>

    <div id="categorySelect" class="section space-y-2">
      <p class="text-center">請選擇分類</p>
      <div class="grid grid-cols-2 gap-2">
        <button onclick="showSection('conditionSet')" class="btn-outline">中式</button>
        <button onclick="showSection('conditionSet')" class="btn-outline">日式</button>
        <button onclick="showSection('conditionSet')" class="btn-outline">健康便當</button>
        <button onclick="showSection('conditionSet')" class="btn-outline">蔬食</button>
      </div>
    </div>

    <div id="conditionSet" class="section space-y-3">
      <input type="number" class="input" placeholder="最大價錢" id="price">
      <input type="number" class="input" placeholder="熱量上限 (kcal)" id="calories">
      <input type="number" class="input" placeholder="最少蛋白質 (g)" id="protein">
      <button onclick="showSection('showResult')" class="btn-primary w-full">模擬：找到推薦</button>
      <button onclick="showSection('conditionFail')" class="btn-outline w-full">模擬：找不到</button>
    </div>

    <div id="conditionFail" class="section text-center space-y-3">
      <p class="text-red-600">找不到符合條件的餐點</p>
      <button onclick="showSection('conditionSet')" class="btn-outline">重新設定條件</button>
    </div>

    <div id="showResult" class="section space-y-3">
      <div class="p-4 bg-gray-100 rounded-xl shadow-inner">
        <p class="font-bold text-lg">推薦餐點：健康雞胸便當</p>
        <p>價格：120 元｜熱量：520 kcal｜蛋白質：30g</p>
      </div>
      <p class="text-center">你想吃這個嗎？</p>
      <button onclick="showSection('finalConfirm')" class="btn-primary w-full">是</button>
      <button onclick="showSection('retryConfirm')" class="btn-outline w-full">否</button>
    </div>

    <div id="retryConfirm" class="section text-center space-y-3">
      <p>要再推薦一次嗎？（最多三次）</p>
      <button onclick="showSection('showResult')" class="btn-primary">再推薦一次</button>
      <button onclick="showSection('cancelSuggest')" class="btn-outline">不用了</button>
    </div>

    <div id="finalConfirm" class="section text-center space-y-3">
      <p class="text-green-600">已為你準備這道餐點！</p>
      <button onclick="showSection('enter')" class="btn-primary">回首頁</button>
    </div>

    <div id="cancelSuggest" class="section text-center space-y-3">
      <p>請自行選擇或回首頁</p>
      <button onclick="showSection('enter')" class="btn-outline">回首頁</button>
    </div>

    </main>

    <footer class="text-center text-sm text-gray-600 py-8 border-t border-gray-300">
      © 2025 智慧餐點推薦系統｜聯絡信箱：example@email.com
    </footer>

    <script>
      const users = JSON.parse(localStorage.getItem('users') || '{}');

      function showSection(id) {
        document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
        document.getElementById(id).classList.add('active');
        window.scrollTo(0, 0);
      }

      function register() {
        const acc = document.getElementById('registerAccount').value.trim();
        const pwd = document.getElementById('registerPassword').value.trim();
        const error = document.getElementById('registerError');
        if (!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(acc)) {
          error.textContent = "請輸入有效的 Email 格式";
          return;
        }
        if (pwd.length < 6) {
          error.textContent = "密碼至少 6 碼";
          return;
        }
        users[acc] = pwd;
        localStorage.setItem('users', JSON.stringify(users));
        error.textContent = "";
        showSection('registerSuccess');
      }

      function login() {
        const acc = document.getElementById('loginAccount').value.trim();
        const pwd = document.getElementById('loginPassword').value.trim();
        const error = document.getElementById('loginError');
        if (users[acc] === pwd) {
          localStorage.setItem('currentUser', acc);
          error.textContent = "";
          showSection('loginSuccess');
        } else {
          error.textContent = "帳號或密碼錯誤";
        }
      }

      window.onload = () => {
        const currentUser = localStorage.getItem('currentUser');
        if (currentUser && users[currentUser]) {
          showSection('loginSuccess');
        }
      };
    </script>
  </body>
</html>
